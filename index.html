<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Singapore — Interactive SVG Map + Bar Chart</title>
<style>
  :root{
    --bg:#0b1220;
    --card:#111827;
    --text:#e5e7eb;
    --base:#93a3b8;         /* default fill */
    --hover:#22c55e;        /* hover fill */
    --stroke:#334155;

    /* chart palette (reusing theme) */
    --muted:#94a3b8;
    --accent:#38bdf8;
    --bar:#60a5fa;
    --bar-hover:#f59e0b;
    --grid:#1f2937;
  }
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    display:flex; align-items:flex-start; justify-content:center; padding:18px;
    gap:18px; flex-wrap:wrap;
  }
  .card{
    width:min(1200px,95vw);
    background:var(--card); border:1px solid #1f2937; border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.35);
    padding:16px; position:relative;
  }
  h1,h2{margin:0 0 10px;font-size:1.1rem;font-weight:700;color:#cbd5e1}

  /* Tooltip (map) */
  .tip{
    position:absolute; pointer-events:none; z-index:5;
    padding:6px 10px; border-radius:8px; font-weight:700; font-size:.95rem;
    background:#0b1220; color:white; border:1px solid #1f2937;
    box-shadow:0 6px 18px rgba(0,0,0,.35);
    opacity:0; transform:translate(-50%,-120%) scale(.98);
    transition:opacity .12s ease, transform .12s ease;
    white-space:nowrap;
  }
  .tip.show{opacity:1; transform:translate(-50%,-120%) scale(1);}

  /* Map frame */
  .mapwrap{position:relative; overflow:hidden; border-radius:12px; background:#0b1220}
  .mapwrap svg{display:block; width:100%; height:auto}

  /* Shape styling */
  .sg-shape{
    fill:var(--base);
    stroke:var(--stroke);
    stroke-width:.75;
    transition:fill .15s ease, filter .15s ease;
    cursor:pointer;
  }
  .sg-shape:hover{ fill:var(--hover); filter:drop-shadow(0 0 6px rgba(34,197,94,.45)); }
  .sg-shape:focus-visible{ outline:2px solid #22c55e; outline-offset:2px; }

  .hint{margin-top:10px; color:var(--muted); font-size:.9rem}

  /* ===== Bar chart styles (namespaced) ===== */
  .bc-wrap{
    padding:8px; border-radius:12px; background:#0b1220; border:1px solid #1f2532;
  }
  .bc-controls{ display:flex; gap:8px; flex-wrap:wrap; margin:0 0 10px; }
  .bc-btn{
    background:#0b1220; color:var(--text); border:1px solid #263244;
    padding:8px 10px; border-radius:10px; cursor:pointer; font-size:14px;
  }
  .bc-btn:hover{ border-color:var(--accent); }
  .bc-grid line { stroke: var(--grid); stroke-width: 1; }
  .bc-axis text { fill: var(--muted); font-size: 12px; }
  .bc-bar rect {
    fill: var(--bar); rx: 6; ry: 6;
    transition: y .35s ease, height .35s ease, fill .15s ease, opacity .2s ease;
  }
  .bc-bar:focus rect,
  .bc-bar:hover rect { fill: var(--bar-hover); }
  .bc-bar.selected rect { fill: var(--accent); }
  .bc-label { fill: var(--muted); font-size: 12px; pointer-events: none; }
  .bc-tooltip{
    position: absolute; pointer-events: none; transform: translate(-50%, -115%);
    background: #0b1220; color: var(--text); border: 1px solid #223047;
    padding: 6px 8px; font-size: 12px; border-radius: 8px; white-space: nowrap;
    opacity: 0; transition: opacity .15s ease, transform .15s ease;
  }
  .bc-tooltip.show { opacity: 1; transform: translate(-50%, -125%); }
  .bc-legend { display:flex; gap:8px; align-items:center; color: var(--muted); font-size:12px; margin-top:8px; }
  .bc-swatch { width:10px; height:10px; border-radius:2px; display:inline-block; }
  .bc-swatch.base { background: var(--bar); }
  .bc-swatch.hover { background: var(--bar-hover); }
</style>
</head>
<body>
  <!-- ===== Card 1: Your Map (unchanged) ===== -->
  <div class="card" aria-label="Interactive map of Singapore">
    <h1>Hover the map to see: “Singapore”</h1>
    <div class="mapwrap" id="mapWrap">
      <div id="tooltip" class="tip" role="tooltip" aria-hidden="true">Singapore</div>

      <!-- ===== Inline SVG (your map) ===== -->
      <svg id="sg-map" xmlns="http://www.w3.org/2000/svg"
           xmlns:svg="http://www.w3.org/2000/svg"
           width="800.49158" height="496.70999"
           aria-labelledby="mapTitle" role="img">
        <title id="mapTitle">Singapore</title>

        <!-- Add class="sg-shape" to all paths to make the whole country one interactive target -->
        <path class="sg-shape" id="SG-01" title="Singapore" d="m 431.09042,77.54 1.18,0.42 1.92,0.51 1.44,1.59 1.85,1.34 1.09,1.59 0.75,1.37 0.09,1.28 0.99,1.55 2.04,2.04 1.27,1.2 1.42,0.7 1.26,0.99 1.68,0.52 0.92,0.08 0.33,0.75 0.92,0.42 1.13,0.09 0.67,-1.26 1.43,-1.34 1.01,0 2.01,0.08 1.34,0.33 2.27,1.51 1.59,1.01 1.62,0.55 1.58,0.47 1.91,0.47 2.79,0.03 1.96,0.44 1.26,0.09 1.11,0.62 0.88,0.79 1.03,0.91 1.06,0.65 1.58,1.34 -0.3,0.29 -1.6,2.44 -3.55,5.42 -2.9,2.15 -3.09,1.5 -2.53,1.69 -1.5,1.78 -0.37,4.87 -0.66,1.12 -0.66,1.59 -0.4,1.84 -0.17,0.78 -2.43,3.84 -2.53,1.03 -2.43,1.22 -0.09,6.18 -1.31,1.78 -1.59,0.84 -0.13,1.68 -1.74,2.93 -1.9,3.42 -0.95,3.61 -0.95,4.18 -1.33,5.13 -1.71,4.36 -1.84,3.15 -3.48,-0.21 -4.58,-0.86 -3.29,-0.57 -3.58,-0.29 -3.29,1.57 -2.57,4.14 -1.72,4.44 -1.57,6.15 -2.57,4.57 -2.72,4.44 -0.14,5.87 2.15,2.28 2,4.29 1,3.86 0.14,3.01 -1.86,1.86 -5.15,0.29 -3.29,1.42 0,3.72 4.15,0.14 5.15,0.86 3.72,0.86 0.72,2.86 0.14,4.44 1.86,4.57 2.28,3.86 1.72,0.86 4.58,1.43 3.29,1.43 2.57,3.86 4.29,3 0.57,4.87 1.71,2.58 -0.38,1.35 -0.48,1.66 -2.43,1 -1.43,0.86 -1.29,2.29 -3.72,3 -1,3.43 0.43,1.43 1,1.72 0.71,1.57 0.71,2.72 -0.5,1.08 0.09,0.75 0.14,1.55 -0.2,1.09 -0.54,1.56 -0.75,1.43 -1.5,1.38 -1.78,1.39 -1.06,0.62 -0.77,0.46 -0.14,0.59 -0.71,1.59 -1.18,0.64 -1.7,1.87 -1.64,1.58 -0.33,2 -0.39,3.26 0.36,3.02 0.48,2.17 0.83,2.68 -0.07,1.77 -0.07,2.24 -2.24,0.61 -1.63,-0.05 -2.38,-0.07 -2.58,-0.14 -2.04,-0.34 -1.97,0.14 -3.6,-0.27 -0.95,3.4 -0.49,1.07 -0.33,2.4 -0.2,1.49 0.26,3.35 0.65,0.59 1.26,3.18 2.04,0.2 1.14,-2.67 1.72,-2.57 1.28,-2.43 0.88,-1.43 0.34,-1.83 1.49,-0.07 1.97,0.14 1.43,0.54 1.29,0.75 2.06,0.58 3.26,1.45 3.38,2.17 2.54,2.29 2.42,2.78 1.21,1.69 -0.24,1.93 -17,13.37 -1.9,0 -1.51,-0.47 -2.38,-0.72 -2.62,-0.95 -0.76,-0.64 -0.68,-0.27 0.07,-0.95 0.61,-0.41 0,-1.02 -0.88,-0.54 -1.54,0.14 -0.3,-0.19 -1.35,-0.72 -1.43,-0.4 -1.43,-0.64 -2.53,2.03 0.19,0.99 0.03,15.49 -1.09,0.88 0.2,1.29 1.84,1.93 -0.56,0.4 -0.87,-0.79 -1.43,-1.67 -1.67,-1.75 -1.58,-1.58 -1.83,-2.06 -1.91,-1.75 -1.11,0.08 -0.63,0.56 -0.59,1.3 -1.08,0.99 1.43,1.63 1.15,1.43 0.95,1.22 0.14,1.02 -0.68,0 -2.83,-3.23 -1.51,-1.18 -1.43,-0.95 -0.82,-1.29 -1.02,-1.02 -0.88,-0.68 -1.07,-1.17 -3.89,-0.25 -9.5,-0.12 -0.67,0.49 -1.75,0.96 -2.06,1.19 -3.73,2.3 -1.68,1.17 -1.48,0.24 -1.76,1.05 -8.09,0 -0.24,-1.19 -0.88,-0.08 -0.63,-0.47 -1.44,-0.13 -0.29,0.63 -0.57,-0.12 -0.03,-0.57 1.17,-0.86 -2.12,-1.4 -0.43,1.23 -1.15,1.69 -1.01,-0.39 -1.19,-1.11 -0.95,-0.95 0.41,-0.7 1.26,-1.4 -1.09,-0.73 -0.78,-0.07 -1.7,-0.83 -2.47,-2.09 -1.71,-3.23 -0.95,-3.04 0.76,-3.04 2.28,-3.23 1.9,-1.9 3.04,-2.66 -0.38,-3.42 -1.52,-2.28 -4.56,0.19 -3.99,-0.19 -2.85,-1.14 -4.18,-0.19 -2.28,1.52 -4.18,-1.33 -4.18,-3.6 -1.71,-3.23 -0.76,-5.5 -0.76,-4.94 -0.76,-3.42 -1.33,-3.42 -2.66,-1.9 -1.52,-3.99 1.33,-3.04 1.9,-3.42 0.57,-3.41 2.3,1.78 1.95,1.71 1.47,1.47 1.71,-0.24 0.73,-3.42 0.49,-1.95 0.73,-2.69 0,-2.69 -0.24,-2.69 0.73,-2.69 2.44,-3.91 2.69,-3.91 2.2,-2.44 1.71,-2.2 2.2,-0.49 3.18,-1.22 2.44,-3.18 0,-2.93 1.22,-3.91 -0.49,-3.67 1.22,-2.44 2.2,-1.47 1.71,-2.2 -0.49,-3.18 -2.44,-0.49 -2.93,0 -3.18,-1.95 -3.91,-4.15 -3.91,-3.42 -2.44,-2.69 -3.91,-2.69 -0.98,-4.15 1.47,-4.4 2.93,-3.67 2.93,-1.71 2.44,-3.42 1.22,-4.15 5.13,-4.4 3.91,-2.93 3.18,-2.44 1.96,-4.64 1.95,-5.86 2.81,-4.53 1.45,-5.8 z"/>
        <path class="sg-shape" id="SG-02" title="Singapore" d="m 532.93042,110.3 1.26,1.05 ... z"/>
        <path class="sg-shape" id="SG-03" title="Singapore" d="m 411.83042,35.48 0.98,0 ... z"/>
        <path class="sg-shape" id="SG-04" title="Singapore" d="m 633.52042,131.77 2.21,0.72 ... z"/>
        <path class="sg-shape" id="SG-05" title="Singapore" d="m 186.24042,484.79 0,0.79 ... z"/>
        <!-- (Use your full paths here) -->
      </svg>
      <!-- ===== end inline SVG ===== -->
    </div>

    <div class="hint">Tip: You can also Tab to focus the shape.</div>
  </div>

  <!-- ===== Card 2: Interactive SVG Bar Chart ===== -->
  <div class="card" aria-label="Interactive bar chart">
    <h2>Interactive SVG Bar Chart</h2>
    <div class="bc-controls">
      <button class="bc-btn" id="bcSortAsc" aria-label="Sort ascending">Sort ↑</button>
      <button class="bc-btn" id="bcSortDesc" aria-label="Sort descending">Sort ↓</button>
      <button class="bc-btn" id="bcShuffle" aria-label="Shuffle data">Shuffle</button>
      <button class="bc-btn" id="bcReset" aria-label="Reset data">Reset</button>
    </div>
    <div class="bc-wrap" id="bcWrap">
      <div id="bcTip" class="bc-tooltip" role="status" aria-live="polite"></div>
      <svg id="bcChart" viewBox="0 0 960 420" role="img" aria-labelledby="bcTitle bcDesc">
        <title id="bcTitle">Sample Data</title>
        <desc id="bcDesc">Bar chart with keyboard and mouse interactivity. Use Tab to focus, Enter to select, and arrow keys to move.</desc>
        <defs>
          <clipPath id="bcClip"><rect x="80" y="20" width="840" height="320" rx="8" ry="8"/></clipPath>
        </defs>
        <g class="bc-grid"></g>
        <g id="bcPlot" clip-path="url(#bcClip)"></g>
        <g class="bc-axis bc-axis-x"></g>
        <g class="bc-axis bc-axis-y"></g>
      </svg>
    </div>
    <div class="bc-legend">
      <span class="bc-swatch base"></span> Default
      <span class="bc-swatch hover"></span> Hover/Focus
    </div>
  </div>

<script>
  /* ===== Map tooltip (unchanged except text) ===== */
  (function () {
    const tip = document.getElementById('tooltip');
    const wrap = document.getElementById('mapWrap');
    const targets = document.querySelectorAll('#sg-map .sg-shape');

    function show(e){
      tip.textContent = 'Singapore';
      tip.classList.add('show');
      tip.setAttribute('aria-hidden','false');
      const r = wrap.getBoundingClientRect();
      const x = (e.clientX ?? (r.left + r.width/2)) - r.left;
      const y = (e.clientY ?? (r.top + r.height/2)) - r.top;
      tip.style.left = x + 'px';
      tip.style.top  = y + 'px';
    }
    function hide(){
      tip.classList.remove('show');
      tip.setAttribute('aria-hidden','true');
    }
    targets.forEach(el=>{
      el.addEventListener('mouseenter', show);
      el.addEventListener('mousemove', show);
      el.addEventListener('mouseleave', hide);
      el.setAttribute('tabindex','0');
      el.addEventListener('focus', show);
      el.addEventListener('blur', hide);
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); show(e); }
      });
    });
  })();

  /* ===== Interactive SVG Bar Chart (namespaced) ===== */
  (()=>{
    const svg = document.getElementById('bcChart');
    const plot = document.getElementById('bcPlot');
    const grid = svg.querySelector('.bc-grid');
    const axisX = svg.querySelector('.bc-axis-x');
    const axisY = svg.querySelector('.bc-axis-y');
    const tip = document.getElementById('bcTip');
    const wrap = document.getElementById('bcWrap');

    const W = 960, H = 420;
    const margin = { top: 20, right: 40, bottom: 56, left: 80 };
    const innerW = W - margin.left - margin.right;
    const innerH = H - margin.top - margin.bottom;

    const baseData = [
      { label: 'Jan', value: 12 },
      { label: 'Feb', value: 19 },
      { label: 'Mar', value: 7 },
      { label: 'Apr', value: 14 },
      { label: 'May', value: 23 },
      { label: 'Jun', value: 10 },
      { label: 'Jul', value: 27 },
      { label: 'Aug', value: 17 },
      { label: 'Sep', value: 9  },
      { label: 'Oct', value: 20 },
      { label: 'Nov', value: 15 },
      { label: 'Dec', value: 25 },
    ];
    let data = baseData.map(d=>({...d}));
    let selectedIndex = -1;

    function xScale(i,n){
      const padding = 0.12;
      const band = innerW / n;
      const barW = band * (1 - padding);
      const x = margin.left + band * i + (band - barW)/2;
      return {x, barW};
    }
    function yScale(v, vmax){
      const t = vmax ? (v / vmax) : 0;
      const y = margin.top + innerH * (1 - t);
      const h = innerH * t;
      return {y, h};
    }

    function drawGridAxes(){
      grid.innerHTML = ''; axisX.innerHTML = ''; axisY.innerHTML = '';
      const ticks = 5;
      const vmax = Math.max(...data.map(d=>d.value)) || 1;

      for(let i=0;i<=ticks;i++){
        const v = (vmax/ticks)*i;
        const {y} = yScale(v, vmax);
        const l = lineEl(margin.left, y, margin.left+innerW, y);
        grid.appendChild(l);

        const t = textEl((margin.left-10), y+4, v.toFixed(0));
        t.setAttribute('text-anchor','end');
        t.classList.add('bc-axis');
        axisY.appendChild(t);
      }
      const n = data.length;
      data.forEach((d,i)=>{
        const {x, barW} = xScale(i, n);
        const tx = x + barW/2;
        const t = textEl(tx, margin.top+innerH+24, d.label);
        t.setAttribute('text-anchor','middle');
        t.classList.add('bc-axis');
        axisX.appendChild(t);
      });
    }

    function drawBars(){
      plot.innerHTML = '';
      const vmax = Math.max(...data.map(d=>d.value)) || 1;
      const n = data.length;

      data.forEach((d,i)=>{
        const {x, barW} = xScale(i, n);
        const {y, h} = yScale(d.value, vmax);

        const g = elNS('g'); g.classList.add('bc-bar');
        if(i===selectedIndex) g.classList.add('selected');
        g.setAttribute('tabindex','0');
        g.setAttribute('role','button');
        g.setAttribute('aria-label', `${d.label}: ${d.value}`);

        const rect = elNS('rect');
        rect.setAttribute('x',x); rect.setAttribute('y',y);
        rect.setAttribute('width',barW); rect.setAttribute('height',h);

        const val = textEl(x+barW/2, y-6, d.value.toString());
        val.setAttribute('text-anchor','middle');
        val.classList.add('bc-label');

        g.appendChild(rect); g.appendChild(val); plot.appendChild(g);

        const show = (evt)=>{
          const r = wrap.getBoundingClientRect();
          const cx = (evt.clientX ?? (r.left + r.width/2)) - r.left;
          const cy = (evt.clientY ?? (r.top + r.height/2)) - r.top;
          tip.textContent = `${d.label}: ${d.value}`;
          tip.style.left = cx+'px'; tip.style.top = cy+'px';
          tip.classList.add('show');
        };
        const hide = ()=> tip.classList.remove('show');

        g.addEventListener('pointerenter', show);
        g.addEventListener('pointermove', show);
        g.addEventListener('pointerleave', hide);
        g.addEventListener('focus', show);
        g.addEventListener('blur', hide);
        g.addEventListener('click', ()=>{
          selectedIndex = (selectedIndex===i? -1 : i);
          drawBars();
        });
        g.addEventListener('keydown', (e)=>{
          if(e.key==='Enter' || e.key===' '){ e.preventDefault(); g.click(); }
          if(e.key==='ArrowRight'){ focusBar((i+1)%n); }
          if(e.key==='ArrowLeft'){  focusBar((i-1+n)%n); }
        });
      });
    }

    function focusBar(i){
      const bars = plot.querySelectorAll('.bc-bar');
      if(!bars.length) return; bars[i].focus();
    }
    function elNS(tag){ return document.createElementNS('http://www.w3.org/2000/svg', tag); }
    function textEl(x,y,txt){ const t=elNS('text'); t.setAttribute('x',x); t.setAttribute('y',y); t.textContent=txt; return t; }
    function lineEl(x1,y1,x2,y2){ const l=elNS('line'); l.setAttribute('x1',x1); l.setAttribute('y1',y1); l.setAttribute('x2',x2); l.setAttribute('y2',y2); return l; }

    // Buttons
    document.getElementById('bcSortAsc').addEventListener('click', ()=>{
      data.sort((a,b)=>a.value-b.value); selectedIndex=-1; drawGridAxes(); drawBars();
    });
    document.getElementById('bcSortDesc').addEventListener('click', ()=>{
      data.sort((a,b)=>b.value-a.value); selectedIndex=-1; drawGridAxes(); drawBars();
    });
    document.getElementById('bcShuffle').addEventListener('click', ()=>{
      for(let i=data.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [data[i],data[j]]=[data[j],data[i]]; }
      selectedIndex=-1; drawGridAxes(); drawBars();
    });
    document.getElementById('bcReset').addEventListener('click', ()=>{
      data = baseData.map(d=>({...d})); selectedIndex=-1; drawGridAxes(); drawBars();
    });

    // Init
    drawGridAxes(); drawBars();
    window.addEventListener('resize', ()=> tip.classList.remove('show'));
  })();
</script>
</body>
</html>
